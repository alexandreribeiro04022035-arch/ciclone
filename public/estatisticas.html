<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estatísticas - CICLONE PTC</title>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Arial, sans-serif;
    }

    body {
        background: linear-gradient(135deg, #1a2980, #26d0ce);
        color: white;
        min-height: 100vh;
    }

    .header {
        background: rgba(0, 0, 0, 0.3);
        padding: 20px;
        text-align: center;
        backdrop-filter: blur(10px);
        border-bottom: 2px solid rgba(255, 255, 255, 0.1);
    }

    .header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        color: #fff;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .header p {
        color: rgba(255, 255, 255, 0.8);
        font-size: 1.1rem;
    }

    .container {
        max-width: 1400px;
        margin: 30px auto;
        padding: 0 20px;
        display: flex;
        gap: 30px;
    }

    .left-side {
        flex: 3;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        padding: 30px;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .right-side {
        flex: 1;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        padding: 30px;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .right-side img {
        width: 100%;
        max-width: 200px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        margin-bottom: 20px;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin: 30px 0;
    }

    .stat-card {
        background: rgba(255, 255, 255, 0.15);
        border-radius: 12px;
        padding: 25px;
        transition: transform 0.3s, background 0.3s;
        border: 1px solid rgba(255, 255, 255, 0.1);
        cursor: pointer;
    }

    .stat-card:hover {
        transform: translateY(-5px);
        background: rgba(255, 255, 255, 0.2);
    }

    .stat-card h3 {
        font-size: 1.3rem;
        margin-bottom: 15px;
        color: #4fc3f7;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .stat-card h3 i {
        font-size: 1.5rem;
    }

    .stat-value {
        font-size: 2.8rem;
        font-weight: bold;
        color: #fff;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        margin: 10px 0;
    }

    .stat-detail {
        font-size: 1rem;
        color: rgba(255, 255, 255, 0.8);
        background: rgba(0, 0, 0, 0.2);
        padding: 12px;
        border-radius: 8px;
        margin-top: 10px;
    }

    .badge {
        display: inline-block;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: bold;
        margin-left: 10px;
    }

    .badge.gold { background: linear-gradient(45deg, #FFD700, #FFA500); color: #000; }
    .badge.silver { background: linear-gradient(45deg, #C0C0C0, #A0A0A0); color: #000; }
    .badge.bronze { background: linear-gradient(45deg, #CD7F32, #8B4513); color: #fff; }

    .info-section {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 25px;
        margin-top: 30px;
        border-left: 5px solid #4fc3f7;
    }

    .info-section h2 {
        color: #4fc3f7;
        margin-bottom: 15px;
        font-size: 1.8rem;
    }

    .info-section p {
        line-height: 1.6;
        color: rgba(255, 255, 255, 0.9);
        margin-bottom: 15px;
    }

    .footer {
        text-align: center;
        padding: 20px;
        margin-top: 40px;
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.9rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    @media (max-width: 1024px) {
        .container {
            flex-direction: column;
        }
        
        .right-side {
            order: -1;
        }
        
        .right-side img {
            max-width: 150px;
        }
    }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<div class="header">
    <h1><i class="fas fa-chart-line"></i> CICLONE PTC - ESTATÍSTICAS</h1>
    <p>Dashboard público com todas as métricas da plataforma</p>
</div>

<div class="container">
    <div class="left-side">
        <div class="info-section">
            <h2><i class="fas fa-info-circle"></i> SOBRE O CICLONE</h2>
            <p>CICLONE  plataforma PTC (Paid-To-Click) brasileira  paga R$ 0,0001 por visualização de anúncio. Nosso sistema distribui renda de forma justa, começando pelo usuário com menor ID.</p>
            <p> Mostra estatísticas  plataforma. Atualiza 30 segundos.</p>
        </div>

        <div class="stats-grid" id="statsGrid">
            <!-- As estatísticas serão carregadas aqui via JavaScript -->
        </div>
    </div>

    <div class="right-side">
        <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Logo CICLONE">
        <div style="text-align: center;">
            <h3 style="color: #4fc3f7; margin-bottom: 10px;">PLATAFORMA ATIVA</h3>
            <div class="stat-value" id="onlineUsers">0</div>
            <p style="color: rgba(255, 255, 255, 0.8);">Usuários Online</p>
        </div>
    </div>
</div>

<div class="footer">
    <p>CICLONE PTC © 2024 - Todos os direitos reservados | Estatísticas atualizadas em tempo real</p>
    <p style="margin-top: 10px;">
        <a href="index.html" style="color: #4fc3f7; text-decoration: none; margin: 0 10px;">Página Inicial</a> | 
        <a href="login-top.html" style="color: #4fc3f7; text-decoration: none; margin: 0 10px;">Login</a> | 
        <a href="register.html" style="color: #4fc3f7; text-decoration: none; margin: 0 10px;">Registrar</a>
    </p>
</div>

<script>
// Função para formatar números
function formatNumber(num) {
    return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
}

// Função para carregar estatísticas
async function carregarEstatisticas() {
    try {
        const resposta = await fetch('https://ciclone-62mq.onrender.com/api/estatisticas');
        const dados = await resposta.json();
        
        if (dados.success) {
            atualizarInterface(dados);
        }
    } catch (erro) {
        console.log('Erro ao carregar estatísticas:', erro);
    }
}

// Função para atualizar a interface
function atualizarInterface(dados) {
    const statsGrid = document.getElementById('statsGrid');
    const onlineUsers = document.getElementById('onlineUsers');
    
    // Atualizar usuários online (simulação)
    onlineUsers.textContent = Math.floor(Math.random() * 50) + 20;
    
    // Criar os cards de estatísticas
    statsGrid.innerHTML = `
        <!-- USUÁRIOS -->
        <div class="stat-card">
            <h3><i class="fas fa-users"></i> USUÁRIOS</h3>
            <div class="stat-value">${formatNumber(dados.total_usuarios)}</div>
            <div class="stat-detail">
                <strong>Maior Saldo:</strong> ${dados.maior_saldo.nome} 
                <span class="badge gold">R$ ${parseFloat(dados.maior_saldo.saldo).toFixed(2)}</span>
            </div>
            <div class="stat-detail">
                <strong>Mais Clicks:</strong> ${dados.mais_clicks.nome}
                <span class="badge silver">${formatNumber(dados.mais_clicks.clicks)} clicks</span>
            </div>
        </div>
        
        <!-- ANÚNCIOS -->
        <div class="stat-card">
            <h3><i class="fas fa-ad"></i> ANÚNCIOS</h3>
            <div class="stat-value">${formatNumber(dados.total_anuncios)}</div>
            <div class="stat-detail">
                <strong>Anúncios Ativos:</strong> ${dados.anuncios_ativos}
            </div>
            <div class="stat-detail">
                <strong>Próximo a Receber:</strong> ${dados.proximo_recebedor.nome}
                <span class="badge bronze">ID: ${dados.proximo_recebedor.id}</span>
            </div>
        </div>
        
        <!-- PRODUTOS -->
        <div class="stat-card">
            <h3><i class="fas fa-shopping-bag"></i> PRODUTOS</h3>
            <div class="stat-value">${formatNumber(dados.total_produtos)}</div>
            <div class="stat-detail">
                <strong>Melhor Avaliado:</strong> ${dados.produto_melhor_nota.titulo}
                <span class="badge gold">${parseFloat(dados.produto_melhor_nota.nota).toFixed(1)}/9</span>
            </div>
            <div class="stat-detail">
                <strong>Pior Avaliado:</strong> ${dados.produto_pior_nota.titulo}
                <span class="badge bronze">${parseFloat(dados.produto_pior_nota.nota).toFixed(1)}/9</span>
            </div>
        </div>
        
        <!-- FINANCEIRO -->
        <div class="stat-card">
            <h3><i class="fas fa-money-bill-wave"></i> FINANCEIRO</h3>
            <div class="stat-value">R$ ${parseFloat(dados.total_distribuido).toFixed(2)}</div>
            <div class="stat-detail">
                <strong>Total Distribuído:</strong> R$ ${parseFloat(dados.total_distribuido).toFixed(2)}
            </div>
            <div class="stat-detail">
                <strong>Próximo Payout:</strong> ID ${dados.proximo_recebedor.id}
            </div>
        </div>
        
        <!-- CLICKS -->
        <div class="stat-card">
            <h3><i class="fas fa-mouse-pointer"></i> CLICKS</h3>
            <div class="stat-value">${formatNumber(dados.total_clicks)}</div>
            <div class="stat-detail">
                <strong>Hoje:</strong> ${formatNumber(dados.clicks_hoje)}
            </div>
            <div class="stat-detail">
                <strong>Última Hora:</strong> ${formatNumber(dados.clicks_hora)}
            </div>
        </div>
        
        <!-- AVALIAÇÕES -->
        <div class="stat-card">
            <h3><i class="fas fa-star"></i> AVALIAÇÕES</h3>
            <div class="stat-value">${formatNumber(dados.total_avaliacoes)}</div>
            <div class="stat-detail">
                <strong>Média Geral:</strong> ${parseFloat(dados.media_avaliacoes).toFixed(1)}/9
            </div>
            <div class="stat-detail">
                <strong>Avaliações Hoje:</strong> ${formatNumber(dados.avaliacoes_hoje)}
            </div>
        </div>
    `;
}

// Carregar estatísticas inicialmente
carregarEstatisticas();

// Atualizar a cada 30 segundos
setInterval(carregarEstatisticas, 30000);
</script>

</body>
</html>
