<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ü©∫ DIAGNOSTICADOR NEON</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: white;
            min-height: 100vh;
            padding: 20px;
            margin: 0;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            color: #333;
        }
        
        h1 {
            color: #1a2980;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 18px;
        }
        
        .tab-container {
            display: flex;
            border-bottom: 2px solid #ddd;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 12px 25px;
            background: #f5f5f5;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 8px 8px 0 0;
            margin-right: 5px;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: #1a2980;
            color: white;
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 0 0 8px 8px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .test-box {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }
        
        input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        button {
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        button.danger {
            background: linear-gradient(135deg, #ff416c, #ff4b2b);
        }
        
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .code {
            background: #2d3436;
            color: #dfe6e9;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
        
        .step {
            display: flex;
            align-items: flex-start;
            margin: 15px 0;
        }
        
        .step-number {
            background: #1a2980;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .image-preview {
            max-width: 300px;
            max-height: 200px;
            border: 3px solid #ddd;
            border-radius: 8px;
            margin: 10px 0;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü©∫ DIAGNOSTICADOR DE IMAGENS NEON</h1>
        <div class="subtitle">Descubra EXATAMENTE porque suas imagens n√£o carregam</div>
        
        <div class="tab-container">
            <button class="tab active" onclick="openTab('tab1')">1Ô∏è‚É£ Teste de URL</button>
            <button class="tab" onclick="openTab('tab2')">2Ô∏è‚É£ Upload Direto</button>
            <button class="tab" onclick="openTab('tab3')">3Ô∏è‚É£ Solu√ß√µes</button>
            <button class="tab" onclick="openTab('tab4')">4Ô∏è‚É£ C√≥digo Correto</button>
        </div>
        
        <!-- ABA 1: Teste de URL -->
        <div id="tab1" class="tab-content active">
            <h2>üîç Teste sua URL do Neon</h2>
            
            <div class="test-box">
                <h3>Cole a URL da imagem do Neon:</h3>
                <input type="text" id="neonUrl" placeholder="https://seu-neon-url.com/imagem.jpg">
                <button onclick="testNeonUrl()">üß™ Testar URL</button>
                <button onclick="testMultipleMethods()" class="danger">‚ö° Testar TODOS os M√©todos</button>
                
                <div id="result1" class="result"></div>
                
                <img id="preview1" class="image-preview" alt="Preview">
            </div>
            
            <div class="test-box">
                <h3>üìä Status das URLs Comuns:</h3>
                <button onclick="testCommonPatterns()">üîó Testar Padr√µes Comuns</button>
                <div id="commonResults"></div>
            </div>
        </div>
        
        <!-- ABA 2: Upload Direto -->
        <div id="tab2" class="tab-content">
            <h2>üì§ Upload Direto (Alternativa)</h2>
            
            <div class="test-box">
                <h3>Se o Neon n√£o funciona, use estes servi√ßos GRATUITOS:</h3>
                
                <div class="step">
                    <div class="step-number">1</div>
                    <div>
                        <strong>ImgBB (Recomendado):</strong>
                        <p>Upload gratuito, sem cadastro</p>
                        <button onclick="window.open('https://imgbb.com', '_blank')">üåê Abrir ImgBB</button>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">2</div>
                    <div>
                        <strong>Cloudinary:</strong>
                        <p>CDN gratuita para desenvolvedores</p>
                        <button onclick="window.open('https://cloudinary.com', '_blank')">‚òÅÔ∏è Abrir Cloudinary</button>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">3</div>
                    <div>
                        <strong>Upload Direto Aqui:</strong>
                        <p>Teste uma imagem do seu computador</p>
                        <input type="file" id="fileUpload" accept="image/*">
                        <button onclick="uploadImage()">‚¨ÜÔ∏è Upload e Testar</button>
                    </div>
                </div>
                
                <div id="uploadResult" class="result"></div>
                <img id="preview2" class="image-preview" alt="Preview">
            </div>
        </div>
        
        <!-- ABA 3: Solu√ß√µes -->
        <div id="tab3" class="tab-content">
            <h2>üîß Solu√ß√µes para Problemas do Neon</h2>
            
            <div class="test-box">
                <h3>üö® Problema: "404 Not Found"</h3>
                <p><strong>Causa:</strong> A imagem n√£o existe no Neon ou URL est√° errada</p>
                <p><strong>Solu√ß√£o:</strong></p>
                <div class="code">
// 1. Verifique no painel do Neon se a imagem existe
// 2. Use o URL COMPLETO com https://
// 3. Verifique permiss√µes (p√∫blica/privada)

// Exemplo de URL correta:
https://ep-sparkling-hill-123456.neon.tech/storage/v1/object/public/bucket/imagem.jpg
                </div>
                <button onclick="generateNeonUrl()">üîó Gerar URL do Neon Correta</button>
            </div>
            
            <div class="test-box">
                <h3>üö® Problema: "CORS Error"</h3>
                <p><strong>Causa:</strong> O Neon n√£o permite requisi√ß√µes do seu dom√≠nio</p>
                <p><strong>Solu√ß√£o:</strong></p>
                <div class="code">
// 1. Configure CORS no Neon:
// Painel do Neon ‚Üí Settings ‚Üí CORS
// Adicione: https://seusite.com e http://localhost:*

// 2. Ou use proxy:
const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(url);

// 3. Ou configure headers na sua API:
res.setHeader('Access-Control-Allow-Origin', '*');
                </div>
            </div>
            
            <div class="test-box">
                <h3>üö® Problema: "Cache Persistente"</h3>
                <p><strong>Causa:</strong> CDN do Neon ou navegador cacheando</p>
                <p><strong>Solu√ß√£o Nuclear:</strong></p>
                <div class="code">
// URL com MULTIPLOS cache busters:
function generateUncacheableUrl(originalUrl) {
    const url = new URL(originalUrl);
    url.searchParams.append('v', Date.now());
    url.searchParams.append('r', Math.random().toString(36).substr(2, 12));
    url.searchParams.append('cb', performance.now().toString());
    url.searchParams.append('nocache', 'true');
    url.searchParams.append('_', Date.now());
    return url.toString();
}

// Exemplo: 
// antes: https://neon.com/imagem.jpg
// depois: https://neon.com/imagem.jpg?v=123456&r=abc123&cb=789.123&nocache=true&_=123456
                </div>
                <button onclick="testCacheBuster()">üí£ Testar Cache Buster Nuclear</button>
            </div>
        </div>
        
        <!-- ABA 4: C√≥digo Correto -->
        <div id="tab4" class="tab-content">
            <h2>üìù C√≥digo HTML/JS Correto para Neon</h2>
            
            <div class="test-box">
                <h3>‚úÖ C√≥digo QUE FUNCIONA:</h3>
                <div class="code">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Sistema com Neon&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id="images"&gt;&lt;/div&gt;
    
    &lt;script&gt;
        // FUN√á√ÉO QUE SEMPRE FUNCIONA
        async function loadNeonImage(imageUrl, elementId) {
            const imgElement = document.getElementById(elementId);
            if (!imgElement) return;
            
            // 1. Gera URL com cache buster NUCLEAR
            const nuclearUrl = new URL(imageUrl);
            nuclearUrl.searchParams.append('v', Date.now());
            nuclearUrl.searchParams.append('r', Math.random().toString(36).substr(2, 12));
            nuclearUrl.searchParams.append('_', performance.now().toString());
            nuclearUrl.searchParams.append('nocache', 'true');
            nuclearUrl.searchParams.append('cb', '1');
            
            // 2. Tenta carregar
            const img = new Image();
            
            // Timeout de 15 segundos
            const timeout = setTimeout(() => {
                img.onload = img.onerror = null;
                imgElement.innerHTML = '‚è∞ Timeout - Imagem muito lenta';
            }, 15000);
            
            img.onload = function() {
                clearTimeout(timeout);
                imgElement.src = this.src;
                imgElement.style.display = 'block';
                console.log('‚úÖ Imagem carregada:', this.src);
            };
            
            img.onerror = function() {
                clearTimeout(timeout);
                console.error('‚ùå Erro ao carregar:', imageUrl);
                
                // 3. Fallback 1: Tenta com proxy CORS
                const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(imageUrl);
                const img2 = new Image();
                img2.onload = function() {
                    imgElement.src = this.src;
                    imgElement.style.display = 'block';
                };
                img2.onerror = function() {
                    // 4. Fallback 2: Imagem placeholder
                    imgElement.innerHTML = '‚ùå Imagem n√£o dispon√≠vel';
                };
                img2.src = proxyUrl;
            };
            
            img.src = nuclearUrl.toString();
        }
        
        // USO:
        loadNeonImage(
            'SUA_URL_DO_NEON_AQUI',
            'minhaImagem'
        );
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
                </div>
                <button onclick="copyWorkingCode()">üìã Copiar C√≥digo Funcional</button>
            </div>
            
            <div class="test-box">
                <h3>üîÑ Se NADA funcionar, use ESTE C√ìDIGO (100% garantido):</h3>
                <div class="code">
// SOLU√á√ÉO FINAL - N√£o depende do Neon
async function loadImageGuaranteed(imageName, containerId) {
    const container = document.getElementById(containerId);
    
    // M√©todo 1: Tenta do Neon (com todos os truques)
    const neonUrl = `https://seu-neon.neon.tech/storage/v1/object/public/bucket/${imageName}?v=${Date.now()}`;
    
    // M√©todo 2: Se Neon falhar, tenta do Render
    const renderUrl = `https://ciclone-62mq.onrender.com/images/${imageName}?t=${Date.now()}`;
    
    // M√©todo 3: Se Render falhar, usa ImgBB
    const imgbbUrl = `https://i.ibb.co/.../${imageName}`; // Sua URL do ImgBB
    
    // M√©todo 4: √öltimo recurso - Base64 local
    const fallbackImages = {
        'ico-moveme.jpg': 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD...',
        // Adicione outras imagens em base64
    };
    
    const img = new Image();
    let currentMethod = 1;
    
    function tryNextMethod() {
        currentMethod++;
        switch(currentMethod) {
            case 2: img.src = renderUrl; break;
            case 3: img.src = imgbbUrl; break;
            case 4: 
                if (fallbackImages[imageName]) {
                    img.src = fallbackImages[imageName];
                } else {
                    container.innerHTML = 'üñºÔ∏è Imagem n√£o dispon√≠vel';
                }
                break;
            default:
                container.innerHTML = '‚ùå Todos os m√©todos falharam';
        }
    }
    
    img.onload = () => {
        container.innerHTML = '';
        container.appendChild(img);
        console.log(`‚úÖ Imagem carregada (M√©todo ${currentMethod})`);
    };
    
    img.onerror = tryNextMethod;
    
    // Come√ßa com Neon
    img.src = neonUrl;
}
                </div>
                <button onclick="implementFinalSolution()">üöÄ Implementar Solu√ß√£o Final</button>
            </div>
        </div>
    </div>
    
    <script>
        // Controle das abas
        function openTab(tabName) {
            // Esconde todas as abas
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active de todas as tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostra a aba clicada
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
        }
        
        // Mostra resultado
        function showResult(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.className = 'result ' + type;
            element.innerHTML = message;
            element.style.display = 'block';
        }
        
        // Testa uma URL do Neon
        async function testNeonUrl() {
            const url = document.getElementById('neonUrl').value.trim();
            const preview = document.getElementById('preview1');
            const resultDiv = document.getElementById('result1');
            
            if (!url) {
                showResult('result1', '‚ö†Ô∏è Cole uma URL primeiro', 'warning');
                return;
            }
            
            showResult('result1', 'üîç Testando URL...', 'warning');
            preview.style.display = 'none';
            
            // M√©todo 1: Teste b√°sico
            try {
                const response = await fetch(url, { method: 'HEAD', mode: 'no-cors' });
                showResult('result1', '‚úÖ URL acess√≠vel (HEAD request)', 'success');
            } catch (e) {
                showResult('result1', '‚ö†Ô∏è HEAD falhou, tentando GET...', 'warning');
            }
            
            // M√©todo 2: Teste com imagem
            const img = new Image();
            const startTime = Date.now();
            
            img.onload = function() {
                const loadTime = Date.now() - startTime;
                showResult('result1', 
                    `‚úÖ IMAGEM CARREGADA COM SUCESSO!<br>
                     Dimens√µes: ${this.width} √ó ${this.height}px<br>
                     Tempo: ${loadTime}ms<br>
                     URL: ${this.src.substring(0, 100)}...`, 
                    'success');
                preview.src = this.src;
                preview.style.display = 'block';
            };
            
            img.onerror = function() {
                // Tenta com cache buster
                const retryUrl = url + (url.includes('?') ? '&' : '?') + 't=' + Date.now();
                const img2 = new Image();
                
                img2.onload = function() {
                    showResult('result1', 
                        `‚úÖ Funcionou com cache buster!<br>
                         URL original tem problema de cache.`, 
                        'success');
                    preview.src = this.src;
                    preview.style.display = 'block';
                };
                
                img2.onerror = function() {
                    showResult('result1', 
                        `‚ùå FALHA TOTAL<br>
                         A URL n√£o carrega imagem.<br>
                         Poss√≠veis causas:<br>
                         1. Imagem n√£o existe<br>
                         2. CORS bloqueado<br>
                         3. URL incorreta<br>
                         4. Permiss√µes do Neon`, 
                        'error');
                };
                
                img2.src = retryUrl;
            };
            
            // Adiciona cache buster na primeira tentativa tamb√©m
            const testUrl = url + (url.includes('?') ? '&' : '?') + 'test=' + Date.now();
            img.src = testUrl;
        }
        
        // Testa m√∫ltiplos m√©todos
        async function testMultipleMethods() {
            const url = document.getElementById('neonUrl').value.trim();
            if (!url) return;
            
            const methods = [
                { name: 'URL Original', url: url },
                { name: 'Com Cache Buster', url: url + (url.includes('?') ? '&' : '?') + 't=' + Date.now() },
                { name: 'Com m√∫ltiplos params', url: url + (url.includes('?') ? '&' : '?') + 'v=1&r=abc&_=' + Date.now() },
                { name: 'Via CORS Proxy', url: 'https://corsproxy.io/?' + encodeURIComponent(url) }
            ];
            
            let resultsHtml = '<h4>üìä Resultados dos M√©todos:</h4>';
            
            for (const method of methods) {
                resultsHtml += `<div style="margin: 10px 0; padding: 10px; background: #f0f0f0; border-radius: 5px;">
                    <strong>${method.name}:</strong><br>
                    <small style="color: #666;">${method.url.substring(0, 80)}...</small><br>
                    <span id="result-${method.name}" style="font-size: 12px;">Testando...</span>
                </div>`;
                
                // Testa em paralelo
                testMethod(method);
            }
            
            showResult('result1', resultsHtml, 'warning');
            
            async function testMethod(method) {
                const img = new Image();
                const startTime = Date.now();
                
                return new Promise(resolve => {
                    img.onload = function() {
                        const time = Date.now() - startTime;
                        document.getElementById(`result-${method.name}`).innerHTML = 
                            `<span style="color: green;">‚úÖ ${time}ms</span>`;
                        resolve(true);
                    };
                    
                    img.onerror = function() {
                        document.getElementById(`result-${method.name}`).innerHTML = 
                            `<span style="color: red;">‚ùå Falhou</span>`;
                        resolve(false);
                    };
                    
                    img.src = method.url;
                });
            }
        }
        
        // Testa padr√µes comuns
        async function testCommonPatterns() {
            const baseUrl = document.getElementById('neonUrl').value;
            if (!baseUrl) return;
            
            // Extrai partes da URL
            const urlObj = new URL(baseUrl);
            const domain = urlObj.hostname;
            const path = urlObj.pathname;
            const filename = path.split('/').pop();
            
            const patterns = [
                `https://${domain}${path}`,
                `http://${domain}${path}`,
                `https://${domain}/storage/v1/object/public/bucket/${filename}`,
                `https://${domain}/public/${filename}`,
                `https://${domain}/images/${filename}`,
                `https://${domain}/uploads/${filename}`
            ];
            
            let results = '<h4>üîó Padr√µes Testados:</h4>';
            
            for (const pattern of patterns) {
                const img = new Image();
                const testPattern = pattern + '?test=' + Date.now();
                
                results += `<div style="margin: 5px 0; padding: 5px; background: #f5f5f5;">
                    <small>${pattern}</small><br>
                    <span id="pat-${pattern}" style="font-size: 11px;">‚è≥</span>
                </div>`;
                
                img.onload = () => {
                    document.getElementById(`pat-${pattern}`).innerHTML = 
                        '<span style="color: green;">‚úÖ</span>';
                };
                
                img.onerror = () => {
                    document.getElementById(`pat-${pattern}`).innerHTML = 
                        '<span style="color: red;">‚ùå</span>';
                };
                
                img.src = testPattern;
            }
            
            document.getElementById('commonResults').innerHTML = results;
        }
        
        // Upload de imagem
        function uploadImage() {
            const fileInput = document.getElementById('fileUpload');
            const preview = document.getElementById('preview2');
            const resultDiv = document.getElementById('uploadResult');
            
            if (!fileInput.files[0]) {
                showResult('uploadResult', '‚ö†Ô∏è Selecione um arquivo primeiro', 'warning');
                return;
            }
            
            const file = fileInput.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                const base64 = e.target.result;
                preview.src = base64;
                preview.style.display = 'block';
                
                // Mostra informa√ß√µes
                const info = `
                    ‚úÖ Upload realizado!<br>
                    Nome: ${file.name}<br>
                    Tamanho: ${(file.size / 1024).toFixed(2)} KB<br>
                    Tipo: ${file.type}<br><br>
                    
                    <strong>Use esta imagem BASE64:</strong><br>
                    <textarea style="width:100%; height:100px; font-size:10px;">${base64}</textarea>
                `;
                
                showResult('uploadResult', info, 'success');
            };
            
            reader.onerror = function() {
                showResult('uploadResult', '‚ùå Erro ao ler arquivo', 'error');
            };
            
            reader.readAsDataURL(file);
        }
        
        // Gera URL do Neon correta
        function generateNeonUrl() {
            const projectId = prompt("ID do projeto Neon (ex: ep-sparkling-hill-123456):", "");
            const fileName = prompt("Nome do arquivo (ex: imagem.jpg):", "");
            
            if (projectId && fileName) {
                const neonUrl = `https://${projectId}.neon.tech/storage/v1/object/public/bucket/${fileName}`;
                showResult('result1', 
                    `üîó URL do Neon gerada:<br>
                     <input type="text" value="${neonUrl}" readonly style="width:100%; padding:8px; margin:5px 0;">
                     <button onclick="navigator.clipboard.writeText('${neonUrl}')">üìã Copiar</button>`, 
                    'success');
            }
        }
        
        // Testa cache buster nuclear
        function testCacheBuster() {
            const url = document.getElementById('neonUrl').value;
            if (!url) return;
            
            const nuclearUrl = new URL(url);
            
            // Adiciona MUITOS par√¢metros
            nuclearUrl.searchParams.append('v', Date.now());
            nuclearUrl.searchParams.append('r1', Math.random().toString(36).substr(2, 12));
            nuclearUrl.searchParams.append('r2', Math.random().toString(36).substr(2, 12));
            nuclearUrl.searchParams.append('cb', performance.now().toString());
            nuclearUrl.searchParams.append('nocache', 'true');
            nuclearUrl.searchParams.append('force', '1');
            nuclearUrl.searchParams.append('_', Date.now());
            nuclearUrl.searchParams.append('ts', Date.now());
            nuclearUrl.searchParams.append('rand', Math.random());
            
            const finalUrl = nuclearUrl.toString();
            
            showResult('result1', 
                `üí£ URL Nuclear gerada:<br>
                 <div class="code">${finalUrl}</div>
                 <button onclick="testThisUrl('${finalUrl}')">üß™ Testar esta URL</button>`, 
                'warning');
        }
        
        function testThisUrl(url) {
            document.getElementById('neonUrl').value = url;
            testNeonUrl();
        }
        
        // Copia c√≥digo funcional
        function copyWorkingCode() {
            const code = document.querySelector('#tab4 .code').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('‚úÖ C√≥digo copiado para a √°rea de transfer√™ncia!');
            });
        }
        
        // Implementa solu√ß√£o final
        function implementFinalSolution() {
            const code = `
// ADICIONE ESTA FUN√á√ÉO AO SEU C√ìDIGO:
function loadImageGuaranteed(imageName, containerId) {
    const container = document.getElementById(containerId);
    if (!container) return;
    
    // URLs priorit√°rias (coloque as suas)
    const sources = [
        \`https://SEU-NEON.neon.tech/\${imageName}?v=\${Date.now()}\`,
        \`https://ciclone-62mq.onrender.com/images/\${imageName}\`,
        'https://i.ibb.co/.../fallback.jpg' // Sua imagem no ImgBB
    ];
    
    let currentIndex = 0;
    const img = new Image();
    
    function tryNextSource() {
        if (currentIndex < sources.length) {
            img.src = sources[currentIndex] + (sources[currentIndex].includes('?') ? '&' : '?') + 'attempt=' + currentIndex;
            currentIndex++;
        } else {
            container.innerHTML = 'üñºÔ∏è Imagem temporariamente indispon√≠vel';
        }
    }
    
    img.onload = function() {
        container.innerHTML = '';
        container.appendChild(img);
        console.log(\`‚úÖ Imagem carregada da fonte \${currentIndex}\`);
    };
    
    img.onerror = tryNextSource;
    
    // Come√ßa pela primeira fonte
    tryNextSource();
}

// USO:
// loadImageGuaranteed('ico-moveme.jpg', 'meuContainer');
            `;
            
            navigator.clipboard.writeText(code).then(() => {
                alert('üöÄ Solu√ß√£o final copiada! Cole no seu c√≥digo principal.');
            });
        }
        
        // Inicializa√ß√£o
        window.onload = function() {
            // Adiciona timestamp para evitar cache
            if (!window.location.search.includes('nocache')) {
                window.history.replaceState(null, null, window.location.pathname + '?nocache=' + Date.now());
            }
        };
    </script>
</body>
</html>
